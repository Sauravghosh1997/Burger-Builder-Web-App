withErrorHandler is used for global error handling for all components